---
title: FOL inference
author: Johannes Korbmacher
locked: true
weight: 90
params: 
  id: sli-if
  license: 'CC-BY-4.0'
  highlights:
     - keyword: "FOL natural deduction"
       id: "nd"
     - keyword: "Universal instantiation"
       id: "ue"
     - keyword: "Universal introduction"
       id: "ui"
     - keyword: "Existential introduction"
       id: "ei"
     - keyword: "Existential elimination"
       id: "ee"
     - keyword: "Generalized MP"
       id: "gmp"
     - keyword: "Unification"
       id: "uni"
     - keyword: "First Order Resolution"
       id: "resolution"
     - keyword: "FOL CNF"
       id: "CNF"

---

</section>
<section>
    {{< img src="img/qr-code.png" class="img-thumbnail" >}}
    <p><a href="https://forms.gle/JiXXM9eysAZaJMja9" target="_blank" style="font-size:1.5em">https://forms.gle/JiXXM9eysAZaJMja9</a></p>
  </section>
<section>
  <section id="FOL">
    <dl class="row" >
      <dd class="col">
        <i class="bi bi-arrow-right-square-fill text-primary" style="font-size:100px;"></i> 
        <h1><span class="text-danger">First Order</span> Inference</h1>
      </dd>
      <dt class="col"></dt>
    </dl>
  </section>
  <section>
    <h1>Background</h1>
    <ul>
      <li class="fragment fade-right"><strong>Aim</strong>: Extend inference methods to FOL</li>
      <li class="fragment fade-right"><strong>Problem</strong>: Undecidability</li>
    </ul>
  </section>
</section>
<section>
  <section id="nd">
    <dl class="row" >
      <dd class="col">
        <i class="bi bi-tree text-primary" style="font-size:100px;"></i> 
        <h1><span class="text-danger">First Order</span> Natural Deduction</h1>
      </dd>
      <dt class="col"></dt>
    </dl>
  </section>
  <section>
    <h1>Rules</h1>
    <ul>
      <li class="fragment fade-right">Two rules per quantifier: $\forall, \exists$</li>
    </ul>
  </section>
  <section>
    <h1>Universal instantiation</h1>
    {{< img src="img/ex-ue.png" class="img-thumbnail" >}}
  </section>
  <section id="ue">
    <h1>Universal instantiation</h1>
    {{< img src="img/ue.png" class="img-thumbnail" >}}
  </section>
  <section>
    <h1>Universal instantiation</h1>
    <ul>
      <li class="fragment fade-right">Substitution: $A(x)\leadsto A(t)$</li>
      <ul>
        <li class="fragment fade-right">If $\forall xA(x)$ is $\forall x\exists y\mathsf{Parent}(x,y)$</li>
        <li class="fragment fade-right">... $A(x)$ is $\exists y\mathsf{Parent}(x,y)$</li>
        <li class="fragment fade-right">... $A(Ada)$ is $\exists y\mathsf{Parent}(Ada,y)$</li>
      </ul>
    </ul>
  </section>
  <section>
    <h1>Universal instantiation</h1>
    <ul class="fs-1">
      <li class="fragment fade-right">Only "free":</li>
      <ul>
        <li class="fragment fade-right">If $A(x)$ is $\exists y\mathsf{Parent}(x,y)\land \forall x\mathsf{Human}(x)$</li>
        <li class="fragment fade-right">... $A(Ada)$ is $\exists y\mathsf{Parent}(Ada,y)\land \forall x\mathsf{Human}(x)$</li>
        <li class="fragment fade-right">... <em>not</em> $\exists y\mathsf{Parent}(Ada,y)\land \forall x\mathsf{Human}(Ada)$</li>
      </ul>
    </ul>
  </section>
  <section>
    <h1>Side-condition</h1>
    <ul>
      <li class="fragment fade-right">No "recapture"</li>
      <ul>
        <li class="fragment fade-right">If $A(x)$ is $\exists y \mathsf{Parent}(x,y)$</li>
        <li class="fragment fade-right">... we may not infer $\exists y \mathsf{Parent}(y,y)$</li>
        <li class="fragment fade-right">... from $\forall x\exists y \mathsf{Parent}(x,y)$</li>
      </ul>
    </ul>
  </section>
  <section>
    <h1>Universal introduction</h1>
    {{< img src="img/ex-ui.png" class="img-thumbnail" >}}
  </section>
  <section id="ui">
    <h1>Universal introduction</h1>
    {{< img src="img/ui.png" class="img-thumbnail" >}}
  </section>
  <section>
    <h1>Side-condition</h1>
    <ul>
      <li class="fragment fade-right">$\dagger$: $\alpha$ <em>arbitrary</em></li>
      <ul>
        <li class="fragment fade-right">$\alpha$ may not occur in any open assumption for $A(\alpha)$</li>
        <span class="fragment fade-right">
          $$\exists y\mathsf{Friend}(x,y)\nvDash \forall x\exists y\mathsf{Friend}(x,y)$$
        </span>
      </ul>
    </ul>
  </section>
  <section>
    {{< img src="img/condition-ue-example.png" class="img-thumbnail mx-auto d-block my-4" >}}
  </section>
  <section>
    <h1>Existential introduction</h1>
    {{< img src="img/ex-ei.png" class="img-thumbnail mx-auto d-block my-4" >}}
  </section>
  <section id="ei">
    <h1>Existential introduction</h1>
    {{< img src="img/ei.png" class="img-thumbnail mx-auto d-block my-4" >}}
  </section>
  <section>
    <h1>Existential elimination</h1>
    {{< img src="img/ex-ee.png" class="img-thumbnail mx-auto d-block my-4" >}}
  </section>
  <section id="ee">
    <h1>Existential elimination</h1>
    {{< img src="img/ee.png" class="img-thumbnail mx-auto d-block my-4" >}}
  </section>
  <section>
    <h1>Side-condition</h1>
    <ul>
      <li class="fragment fade-right">$\ddagger$: $c$ <em>new</em></li>
      <li class="fragment fade-right">May not occur anywhere in the derivation or KB.</li>
      <li class="fragment fade-right">"No assumptions about $c$":</li>
      {{< img src="img/condition-ee-example.png" class="img-thumbnail mx-auto d-block my-4 fragment fade-right" >}}
    </ul>
  </section>
  <section>
      {{< img src="img/full-example.png" class="img-thumbnail mx-auto d-block my-4 fragment fade-right" >}}
  </section>
  <section>
      {{< img src="img/four-rules.png" class="img-thumbnail mx-auto d-block my-4 fragment fade-right" >}}
  </section>
  <section>
    <h1>Meta</h1>
    <ul>
      <li class="fragment fade-right">Sound and complete for FOL: 
        $$P_1,P_2,\dots\vdash C\Leftrightarrow P_1,P_2,\dots\vDash C$$</li>
      <li class="fragment fade-right">Problem: undecidability
        <ul>
          <li class="fragment fade-right">There's <strong>no</strong> algorithm for checking $\vDash$!</li>
        </ul>
    </ul>
  </section>
  <section>
    $$\forall x\exists y\mathsf{BiggerThan}(x,y)$$
    $$\exists y\mathsf{BiggerThan}(c,y)$$
    $$\mathsf{BiggerThan}(c,c_1)$$
    $$\exists y\mathsf{BiggerThan}(c_1,y)$$
    $$\mathsf{BiggerThan}(c_1,c_2)$$
    $$\vdots$$
  </section>
</section>
<section>
  <section>
    <dl class="row" >
      <dd class="col">
        <i class="bi bi-1-circle-fill text-primary" style="font-size:100px;"></i> 
        <h1>Generalized MP and <span class="text-danger">Unification</span></h1>
      </dd>
      <dt class="col"></dt>
    </dl>
  </section>
  <section>
    <h1>Rules in KBs</h1>
    <span class="fs-1">
    $$\forall x\forall n((On(x, n) \land Switch(x, n)) \to Off(x, n + 1))$$
    $$\forall x\forall n((Off(x, n) \land Switch(x, n)) \to On(x, n + 1))$$
    </span>
  </section>
  <section>
    <h1>Inferences</h1>
    <ul>
      <li class="fragment fade-right">Facts:</li>
        <ul>
          <li class="fragment fade-right">$On(L,1)$</li>
          <li class="fragment fade-right">$Switch(L,1)$</li>
        </ul>
    </ul>
    {{< img src="img/gmp-example.png" class="img-thumbnail mx-auto d-block my-4 fragment fade-right" >}}
  </section>
  <section id="gmp">
    <h1>Generalized MP</h1>
    {{< img src="img/gmp.png" class="img-thumbnail mx-auto d-block my-4 fragment fade-right" >}}
  </section>
  <section id="uni">
    <h1>Unification</h1>
    <ul>
      <li class="fragment fade-right">Input: two formulas</li>
      <li class="fragment fade-right">Output: substitution that identifies the two.</li>
        <span class="fs-1 fragment fade-right">
        $$On(L,1)\land Switch(L,1)\text{ and }On(x,y)\land Switch(x,y)$$
        </span>
        <span class="fs-1 fragment fade-right">
        $$x\mapsto L, y\mapsto 1$$
        </span>
    </ul>
  </section>
  <section >
    <h1>Unification</h1>
    <span class="fs-1 fragment fade-right">
      $$\mathsf{YoungerThan}(x,Ada)\qquad \text{ and }\qquad\mathsf{YoungerThan}(Alan,y)$$
    </span>
    <span class="fs-1 fragment fade-right">
      $$x\mapsto Alan, y\mapsto Ada$$
    </span>
    <span class="fs-1 fragment fade-right">
      $$\leadsto$$
    </span>
    <span class="fs-1 fragment fade-right">
      $$\mathsf{YoungerThan}(Alan,Ada)$$
    </span>
  </section>
  <section >
    <h1>Unification</h1>
    <span class="fs-1 fragment fade-right">
      $$\mathsf{OlderThan}(x,Alan)\qquad\mathsf{OlderThan}(Ada,x)$$
    </span>
    <span class="fs-1 fragment fade-right">
      $$x\mapsto Ada, x\mapsto Aland$$
    </span>
    <span class="fs-1 fragment fade-right">
      $$\leadsto$$
    </span>
    <span class="fs-1 fragment fade-right">
      $$\bot$$
    </span>
  </section>
  <section>
    <h1>Unification and Generalized MP</h1>
    {{< img src="img/gmp-u.png" class="img-thumbnail mx-auto d-block my-4" >}}
  </section>
</section>
<section>
  <section id="resolution">
    <dl class="row" >
      <dd class="col">
        <i class="bi bi-emoji-laughing-fill text-primary" style="font-size:100px;"></i> 
        <h1>First Order <span class="text-danger">Resolution</span></h1>
      </dd>
      <dt class="col"></dt>
    </dl>
  </section>
  <section>
    <h1>Resolution rule</h1>
    <p>$l_{i},k_{j}$ literals:</p>
    <span class="fs-2">
    $$\begin{array}{ccc} l_1\lor l_2\lor \dots\lor p & & \neg p\lor k_1\lor
    k_2\lor\dots  \\ \hline & l_1\lor l_2\lor \dots k_1\lor k_2\lor\dots
    \end{array}$$

    $$\begin{array}{ccc} p & & \neg p  \\ \hline & \bot \end{array}$$
    </span>
  </section>
  <section>
    {{< img src="img/example-resolution.png" class="img-thumbnail mx-auto d-block my-4 fragment fade-right" >}}
  </section>
  <section class="fs-2">
    $$A\to B\leadsto \neg A\lor B$$
    $$\ $$
    $$\mathsf{Parent}(\mathsf{FatherOf}(Ada),Ada)\to
    \mathsf{OlderThan}(\mathsf{FatherOf}(Ada),Ada),$$
    $$\mathsf{OlderThan}(\mathsf{FatherOf}(Ada),Ada)\to$$
    $$\mathsf{Before}(\mathsf{BirthdayOf}(\mathsf{FatherOf}(Ada)),\mathsf{BirthdayOf}(Ada))\vDash$$
    $$\mathsf{Parent}(\mathsf{FatherOf}(Ada),Ada)\to$$
    $$\mathsf{Before}(\mathsf{BirthdayOf}(\mathsf{FatherOf}(Ada)),\mathsf{BirthdayOf}(Ada))$$
  </section>
  <section class="fs-2">
    $$\forall x\forall y(\mathsf{Parent}(x,y)\to \mathsf{OlderThan}(x,y)),$$
    $$\forall x\forall y(\mathsf{OlderThan}(x,y)\to \mathsf{Before}(\mathsf{BirthdayOf}(x),\mathsf{BirthdayOf}(y)))\vDash$$
    $$\forall x\forall y(\mathsf{Parent}(x,y)\to \mathsf{Before}(\mathsf{BirthdayOf}(x),\mathsf{BirthdayOf}(y)))$$
    $$\ $$
    {{< img src="img/resolution-universal.png" class="img-thumbnail mx-auto d-block my-4 fragment fade-right" >}}
  </section>
  <section>
    <ol>
      <li>Dropped universal quantifiers, renamed variables for uniqueness.</li>

      <li>Re-wrote to CNF</li>

      <li>Resolution rule with unification: $u\mapsto x$ and $v\mapsto y$.
      </li>
    </ol>
  </section>
  <section>
    <h1>FOL resolution</h1>
    <p class="fs-2">$l_{i},k_{j}$ literals:</p>
    <span class="fs-2 fragment fade-right">
    $$\begin{array}{ccc} l_1\lor l_2\lor \dots\lor m & \neg n\lor k_1\lor
    k_2\lor\dots  \\ \hline & (l_1\lor l_2\lor \dots \lor k_1\lor k_2\lor\dots)[m,\neg n]_U
    \end{array}$$
    </span>
    {{< img src="img/resolution-universal.png" class="img-thumbnail mx-auto d-block my-4 fragment fade-right" >}}
  </section>
  <section id="cnf">
    <h1>FOL CNF</h1>
    <ul>
      <li class="fragment fade-right">Re-write conditionals: $A\to B\leadsto \neg A\lor B$</li>

      <li class="fragment fade-right">De Morgan rules:
        <ul>
          <li class="fragment fade-right">$\neg\neg A\leadsto A$</li>
          <li class="fragment fade-right"> $\neg(A\land B)\leadsto \neg A\lor\neg B$</li>
          <li class="fragment fade-right">$\neg(A\lor B)\leadsto \neg A\land\neg B$</li>
        </ul>
      </li>

      <li class="fragment fade-right">Quantifier dualities
        <ul>

          <li class="fragment fade-right">$\neg\forall xA\leadsto \exists x\neg A$</li>
          <li class="fragment fade-right">$\neg\exists xA\leadsto \forall x\neg A$</li>
        </ul>
      </li>
    </ul>
  </section>
  <section>
    <h1>FOL CNF</h1>
    <ul class="fs-1">
      <li class="fragment fade-right">Re-name variables: $\forall xA\land \exists xB\leadsto \forall x_1A\land \forall
        x_2B$.</li> 

      <li class="fragment fade-right">Apply <strong>Skolemization</strong>: 
        $$\forall x\exists y(P(x)\to R(x,y))\leadsto\forall
        x(P(x)\to R(x,f(x)))$$
      </li>
      <li class="fragment fade-right">Drop all the remaining universal quantifiers</li>

      <li class="fragment fade-right">Apply the distribution:

        $$A\lor (B\land C)\leadsto (A\lor B)\land (A\lor C)$$
      </li>
    </ul>
  </section>
  <section class="fs-2">

    $$\forall x\forall y(\mathsf{Parent}(x,y)\to \neg \forall z (\mathsf{Parent}(z,y)\to x=z))$$

    $$\leadsto$$

    $$\forall x\forall
    y(\neg \mathsf{Parent}(x,y)\lor \neg\forall z(\neg \mathsf{Parent}(z,y)\lor x= z))$$

    $$\leadsto$$

    $$\forall x\forall
    y(\neg \mathsf{Parent}(x,y)\lor \exists z\neg (\mathsf{Parent}(z,y)\land x= z))$$ 

    $$\leadsto$$

    $$\forall x\forall
    y(\neg \mathsf{Parent}(x,y)\lor \exists z\neg (\neg\mathsf{Parent}(z,y)\lor x= z))$$

  </section>

  <section class="fs-3">

    $$\forall x\forall
    y(\neg \mathsf{Parent}(x,y)\lor \exists z(\neg \neg\mathsf{Parent}(z,y)\land x\neq z))$$

    $$\leadsto$$

    $$\forall x\forall
    y(\neg \mathsf{Parent}(x,y)\lor \exists z(\mathsf{Parent}(z,y)\land x\neq z))$$ 

    $$\leadsto$$

    $$\forall x\forall
    y(\neg \mathsf{Parent}(x,y)\lor (\mathsf{Parent}(f(x,y),y)\land x\neq f(x,y)))$$

    $$\leadsto$$

    $$\neg \mathsf{Parent}(x,y)\lor (\mathsf{Parent}(f(x,y),y)\land x\neq f(x,y))$$

    $$\leadsto$$

    $$(\neg \mathsf{Parent}(x,y)\lor \mathsf{Parent}(f(x,y),y))\land (\neg \mathsf{Parent}(x,y)\lor x\neq f(x,y)))$$

  </section>
  <section >
    <h1>FOL CNF</h1>
      <p class="fs-1 fragment fade-right">The resulting formula is <em>not necessarily</em> equivalent:</p>
        <span class="fs-3 fragment fade-right">
        $$\nu(\forall x\forall y(\mathsf{Parent}(x,y)\to \neg \forall z (\mathsf{Parent}(z,y)\to x=z)))$$
        $$\neq\text{ for some }\mathcal{M}$$
        $$\nu((\neg \mathsf{Parent}(x,y)\lor \mathsf{Parent}(f(x,y),y))\land (\neg \mathsf{Parent}(x,y)\lor x\neq f(x,y))))$$
        </span>
  </section>
  <section>
    <h1>FOL CNF</h1>
      <p class="fs-1 fragment fade-right">It is <em>equi-satisfiable:</em></p>
        <span class="fs-3 fragment fade-right">
                  $$\nu(\forall x\forall y(\mathsf{Parent}(x,y)\to \neg \forall z (\mathsf{Parent}(z,y)\to x=z)))=1$$
                  $$\text{ for some }\mathcal{M},\alpha$$
                  $$\Leftrightarrow$$
                  $$\nu((\neg \mathsf{Parent}(x,y)\lor \mathsf{Parent}(f(x,y),y))\land (\neg \mathsf{Parent}(x,y)\lor x\neq f(x,y))))=1$$
                  $$\text{ for some }\mathcal{M},\alpha$$
        </span>
  </section>
  <section>
    <h1>Proof system</h1>
    <ul>
    <span class="fragment fade-right">
      $$P_1,P_2,\dots\vDash C\Leftrightarrow Sat(P_1\land P_2\land \dots\land \neg C)$$</span>

    <span class="fragment fade-right">Resolve
      $CNF(P_1\land P_2\land \dots\land \neg C).$
    </span>

    <span class="fragment fade-right">
      $$P_1,P_2,\dots\vDash C$$ 
      $$\Leftrightarrow$$ 
      $$CNF(P_1\land P_2\land \dots\land \neg C)\vdash \bot$$
    </span>
    </ul>
  </section>
  <section>
    <h1>Proof system</h1>
    <ul>
      <li class="fragment fade-right">Efficient and effective</li>
      <li class="fragment fade-right">Still undecidable 😦</li>
    </ul>
  </section>

</section>
<section>
  <h1>Thanks<span class="text-danger">!</span></h1>
</section>
